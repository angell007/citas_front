<app-modal-basic #newModal [dialogClass]="'modal-lg modal-full'">
    <div class="app-modal-header">
        <div class="row">
            <h4 class=" text text-center justify-content-center modal-title   px-3">
                Nuevo Profesional
            </h4>
            <button type="button" class="close basic-close" (click)="hide()">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
    </div>
    <div class="app-modal-body">
        <form [formGroup]="forma" (ngSubmit)="guardar()">
            <div class="row">

                <div class="col-3 mb-2">
                    <label for="validationServerUsername">Tipo Ident.</label>
                    <div class="input-group">
                        <ng-select class="col-12 m-0 p-0" [items]="typesDocuments" bindLabel="text" bindValue="value"
                            [(ngModel)]="person.type_document_id" formControlName="type_document_id"
                            loadingText="loading">
                        </ng-select>

                        <app-show-errors class="text-danger" [ctrl]="forma.get('type_document_id')"></app-show-errors>
                    </div>

                </div>
                <div class="col-3 mb-2">
                    <label for="identifier">Identificación</label>
                    <div class="input-group">
                        <input type="text" [(ngModel)]="person.identifier" formControlName="identifier"
                            class="form-control" id="identifier">
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('identifier')"></app-show-errors>
                </div>


                <div class="col-3 mb-2">
                    <label for="first_name">Primer Nombre</label>
                    <div class="input-group">
                        <input [(ngModel)]="person.first_name" formControlName="first_name" type="text"
                            class="form-control" id="first_name">
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('first_name')"></app-show-errors>
                </div>

                <div class="col-3 mb-2">
                    <label for="second_name">Segundo Nombre</label>
                    <div class="input-group">
                        <input type="text" [(ngModel)]="person.second_name" formControlName="second_name"
                            class="form-control" id="second_name">
                    </div>
                </div>

                <div class="col-3 mb-2">
                    <label for="first_surname">Primer Apellido</label>
                    <div class="input-group">
                        <input type="text" [(ngModel)]="person.first_surname" formControlName="first_surname"
                            class="form-control" id="first_surname">
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('first_surname')"></app-show-errors>
                </div>

                <div class="col-md-3 mb-2">
                    <label for="second_surname">Segundo Apellido</label>
                    <div class="input-group">
                        <input type="text" [(ngModel)]="person.second_surname" formControlName="second_surname"
                            class="form-control" id="second_surname">
                    </div>
                </div>

                <div class="col-md-3 mb-2">
                    <label for="birth_date">Fecha Nac.</label>
                    <div class="input-group">
                        <input type="date" [(ngModel)]="person.birth_date" formControlName="birth_date"
                            class="form-control" id="birth_date">
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('birth_date')"></app-show-errors>
                </div>

                <div class="col-3 mb-2">
                    <label for="validationServerUsername">Est. Civil</label>
                    <div class="input-group">
                        <select class="custom-select " [(ngModel)]="person.marital_status"
                            formControlName="marital_status">
                            <option [value]="type.value" *ngFor="let type of civilStates.sort()">{{type.name}}</option>
                        </select>
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('marital_status')"></app-show-errors>
                </div>

                <div class="col-md-4 mb-2">
                    <label for="validationServerUsername">IPS Principal</label>

                    <div class="input-group">
                        <ng-select class="col-12 m-0 p-0" [items]="companies" bindLabel="text" bindValue="value"
                            [(ngModel)]="person.company_id" formControlName="company_id" loadingText="loading">
                        </ng-select>
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('company_id')"></app-show-errors>
                </div>

                <div class="col-md-8 mb-2">
                    <label for="validationServerUsername">Instuciones Hab.</label>
                    <div class="input-group">
                        <ng-select class="col-12 m-0 p-0" multiple="true" [items]="companies" bindLabel="text"
                            bindValue="value" [(ngModel)]="person.companies" formControlName="companies"
                            loadingText="loading">
                        </ng-select>
                        <app-show-errors class="text-danger" [ctrl]="forma.get('companies')"></app-show-errors>
                    </div>
                </div>

                <div class="col-md-4 mb-2">
                    <label for="validationServerUsername">Departamento</label>
                    <div class="input-group">
                        <ng-select class="col-12 m-0 p-0" [items]="departments" (change)="getCities()" bindLabel="text"
                            bindValue="value" [(ngModel)]="person.department_id" formControlName="department_id"
                            loadingText="loading">
                        </ng-select>


                        <app-show-errors class="text-danger" [ctrl]="forma.get('department_id')"></app-show-errors>
                    </div>

                </div>
                <div class="col-md-3 mb-2">
                    <label for="municipality_id">Municipio</label>
                    <div class="input-group">
                        <ng-select class="col-12 m-0 p-0" id="municipality_id" [items]="cities" bindLabel="text"
                            bindValue="value" [(ngModel)]="person.municipality_id" formControlName="municipality_id"
                            loadingText="loading">
                        </ng-select>
                    </div>


                    <app-show-errors class="text-danger" [ctrl]="forma.get('municipality_id')"></app-show-errors>
                </div>
                <div class="col-5 mb-2">
                    <label for="specialities">Especialidades</label>
                    <div class="input-group">
                        <ng-select class="col-12 m-0 p-0" id="specialties" [items]="specialities" bindLabel="text"
                            bindValue="value" multiple="true" [(ngModel)]="person.specialities"
                            formControlName="specialities" loadingText="loading">
                        </ng-select>
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('specialities')"></app-show-errors>
                </div>

                <div class="col-md-3 mb-2">
                    <label for="email">Correo</label>
                    <div class="input-group">
                        <input type="text" [(ngModel)]="person.email" formControlName="email" class="form-control"
                            id="email">
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('email')"></app-show-errors>
                </div>

                <div class="col-md-3 mb-2">
                    <label for="cell_phone">Celular</label>
                    <div class="input-group">
                        <input type="text" [(ngModel)]="person.cell_phone" formControlName="cell_phone"
                            class="form-control" id="cell_phone">
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('cell_phone')"></app-show-errors>
                </div>

                <div class="col-md-3 mb-2">
                    <label for="phone">Telefono</label>
                    <div class="input-group">
                        <input type="text" [(ngModel)]="person.phone" formControlName="phone" class="form-control"
                            id="phone">
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('phone')"></app-show-errors>
                </div>


                <!-- <div class="col-md-3 mb-2">
                    <label for="validationServerUsername">Tipo Profesional</label>
                    <div class="input-group">
                        <ng-select class="col-12 m-0 p-0" [items]="peopleTypes" bindLabel="text" bindValue="value"
                             [(ngModel)]="person.people" formControlName="people_type_id" loadingText="loading" >
                        </ng-select>
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('people_type_id')"></app-show-errors>
                </div> -->


                <div class="col-md-3 mb-2">
                    <label for="medical_record">Reg. Médico</label>
                    <div class="input-group">
                        <input type="text" class="form-control" [(ngModel)]="person.medical_record"
                            formControlName="medical_record" id="medical_record">
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('medical_record')"></app-show-errors>
                </div>

                <!-- <div class="col-md-6 mb-3">
                    <label for="validationServerUsername">Contracto.</label>
                    <div class="input-group">
                        <ng-select class="col-12 m-0 p-0" [items]="contracts" bindLabel="text" bindValue="value"
                            [(ngModel)]="person.contract" formControlName="contract" loadingText="loading">
                        </ng-select>
                        <app-show-errors class="text-danger" [ctrl]="forma.get('contract')"></app-show-errors>
                    </div>
                </div> -->


                <div class="col-md-3 mb-2">
                    <label for="image_blob">Foto</label>
                    <div class="input-group">
                        <input type="file" class="form-control" id="image_blob"
                            (change)="onFileChange($event, 'image_blob')" accept="image/*">
                        <input type="hidden" name="image_blob" [(ngModel)]="person.image_blob"
                            formControlName="image_blob" />
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('image_blob')"></app-show-errors>
                </div>

                <div class="col-md-3 mb-2">
                    <label for="signature_blob">Firma</label>
                    <div class="input-group">
                        <input type="file" class="form-control" id="signature_blob"
                            (change)="onFileChange($event, 'signature_blob')" accept="image/*">
                        <input type="hidden" name="signature_blob" [(ngModel)]="person.signature_blob"
                            formControlName="signature_blob" />
                    </div>
                    <app-show-errors class="text-danger" [ctrl]="forma.get('signature_blob')"></app-show-errors>
                </div>

                <div class="col-12 mt-2">
                </div>
            </div>
        </form>

    </div>
    <div class="app-modal-footer ">
        <div class="text-right  px-3">
            <button type="submit" (click)="guardar()" class="btn btn-success btn-sm"
                class="btn btn-primary btn-block btn-sm">Guardar Profesional</button>
        </div>
    </div>
</app-modal-basic>